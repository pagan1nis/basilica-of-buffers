name: ğŸ•¯ï¸ Daily Ritual - Auto Generate Verses

on:
  schedule:
    - cron: '0 9 * * *'  # Her gÃ¼n 09:00 UTC
  workflow_dispatch:

jobs:
  generate-and-publish:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ›ï¸ Checkout Repository
        uses: actions/checkout@v4

      - name: ğŸ± Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'

      - name: ğŸ“œ Generate 3 Daily Verses
        run: |
          node scripts/generate-verse.js
          node scripts/generate-verse.js
          node scripts/generate-verse.js

      - name: ğŸ’¾ Commit Changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: ğŸ•¯ï¸ $(date +%Y-%m-%d) - Auto-generated daily verses
          file_pattern: content/verses/*
          commit_user_name: Basilica Bot
          commit_user_email: bot@basilica.buffers

      - name: ğŸš€ Trigger Pages Deploy
        run: |
          echo "Verses committed, Pages will rebuild automatically on next push"
